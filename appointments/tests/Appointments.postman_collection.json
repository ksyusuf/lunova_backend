{
	"info": {
		"_postman_id": "add9ca17-c2c4-4fa6-86ec-da3b6ac67f7e",
		"name": "Appointments",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "37991120",
		"_collection_link": "https://www.postman.com/red-shuttle-701984/workspace/lunova/collection/37991120-add9ca17-c2c4-4fa6-86ec-da3b6ac67f7e?action=share&source=collection_link&creator=37991120"
	},
	"item": [
		{
			"name": "Randevu Oluşturma",
			"item": [
				{
					"name": "Uzman Tarafından Randevu Oluşturma",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"expert\": 21,\n  \"client\": 20,\n  \"date\": \"2025-02-27\",\n  \"time\": \"15:00:00\",\n  \"duration\": 60,\n  \"notes\": \"Uzman tarafından oluşturulan randevu\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/expert/create/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"expert",
								"create",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Danışan Tarafından Randevu Talebi",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"expert\": 21,\n  \"date\": \"2025-02-27\",\n  \"time\": \"10:00:00\",\n  \"duration\": 45,\n  \"notes\": \"Danışan tarafından randevu talebi\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/client/request/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"client",
								"request",
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Rezervasyon Detay ve İşlemleri",
			"item": [
				{
					"name": "Rezervasyon Detayını Getir",
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "/*\r\nRezervasyon Detayları Getirme\r\n\r\nGönderilen rezervasyon id değerine göre rezervasyon detayı döndürülür.\r\n\r\nYalnızca giriş yapmış ve rezervasyon ile ilişkili kullanıcılara dönüş sağlar.\r\n\r\nBaşkasının rezervasyonlarını göremezsin.\r\n*/",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/22/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"22",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Rezervasyon Kısmi Güncelleme (PATCH)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"notes\": \"Notlar güncellendi - hasta 15 dakika geç gelecek\",\n  \"duration\": 75\n}\n/*\nRezervasyon Kısmi Güncelleme\n\nBu endpoint ile rezervasyonun belirli alanlarını güncelleyebilirsiniz.\nSadece gönderdiğiniz alanlar güncellenir, diğer alanlar değişmez.\n\nGüncellenebilir Alanlar:\n- notes: Notlar\n- duration: Süre (dakika)\n- date: Tarih\n- time: Saat\n\nÖrnek: Sadece notları güncellemek için:\n{\"notes\": \"Yeni not\"}\n\nÖrnek: Saat ve süreyi güncellemek için:\n{\"time\": \"14:30:00\", \"duration\": 60}\n*/",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/22/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"22",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Rezervasyon Tam Güncelleme (PUT)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"expert\": 21,\n  \"client\": 20,\n  \"date\": \"2025-02-27\",\n  \"time\": \"15:00:00\",\n  \"duration\": 60,\n  \"notes\": \"Tam güncellenmiş rezervasyon\"\n}\n/*\nRezervasyon Tam Güncelleme\n\nBu endpoint ile rezervasyonun TÜM alanlarını güncelleyebilirsiniz.\nTüm zorunlu alanların gönderilmesi gerekir.\n\nZorunlu Alanlar:\n- expert: Uzman ID\n- client: Danışan ID\n- date: Tarih (YYYY-MM-DD)\n- time: Saat (HH:MM:SS)\n- duration: Süre (dakika)\n\nİsteğe Bağlı Alanlar:\n- notes: Notlar\n\nNot: Bu işlem tüm mevcut veriyi değiştirir!\n*/",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/22/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"22",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Rezervasyon Durum Güncelleme",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "PATCH",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"status\": \"cancel_requested\"\n}\n/*\nRezervasyon Durum Güncelleme\n\nBu endpoint sadece rezervasyon durumunu günceller.\nDurum geçiş kuralları ve kullanıcı yetkilendirmesi otomatik kontrol edilir.\n\nKullanılabilir Durum Değerleri:\n- \"pending\": Beklemede (uzman tarafından oluşturuldu)\n- \"waiting_approval\": Onay Bekliyor (danışan tarafından oluşturuldu)\n- \"confirmed\": Onaylandı\n- \"cancel_requested\": İptal Talep Edildi (sadece danışan)\n- \"cancelled\": İptal Edildi (sadece uzman)\n- \"completed\": Tamamlandı (sadece uzman)\n\nDurum Geçiş Kuralları:\n- pending → confirmed, cancelled\n- waiting_approval → confirmed, cancelled\n- confirmed → cancel_requested, completed\n- cancel_requested → cancelled, confirmed\n- cancelled, completed: çıkış yok\n\nYetki Kuralları:\n- confirmed, cancelled, completed: Sadece uzman\n- cancel_requested: Sadece danışan\n\nÖrnek kullanımlar:\n- Danışan iptal talebi: {\"status\": \"cancel_requested\"}\n- Uzman onaylama: {\"status\": \"confirmed\"}\n- Uzman tamamlama: {\"status\": \"completed\"}\n*/",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/22/status/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"22",
								"status",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Rezervasyon Silme (Soft Delete)",
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{authorization-secret}}",
									"type": "string"
								}
							]
						},
						"method": "DELETE",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json",
								"type": "text"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/v1/appointments/22/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"api",
								"v1",
								"appointments",
								"22",
								""
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Appointments List",
			"protocolProfileBehavior": {
				"disableBodyPruning": true
			},
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{authorization-secret}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "/*\nRandevu Listesi Endpoint'i - Durum ve Mine Filtreleme\n\nKullanılabilir Sorgu Parametreleri:\n\nmine: boolean - Kullanıcının kendi randevularına göre filtrele\n- true: Sadece giriş yapmış kullanıcının randevularını döndürür (uzman veya danışan olarak)\n- false veya verilmediği durumda: Kullanıcı admin ise tüm randevuları, değilse kendi randevularını döndürür\n\nstatus: Randevu durumuna göre filtrele\nGeçerli değerler: pending, waiting_approval, confirmed, cancel_requested, cancelled, completed\n\nÖrnekler:\n- Tüm randevular (admin) veya kullanıcının randevuları: (parametre yok)\n- Kullanıcının kendi randevuları: ?mine=true\n- Tüm randevular (sadece admin): ?mine=false\n- Kullanıcının onaylanmış randevuları: ?mine=true&status=confirmed\n- Tüm bekleyen randevular (sadece admin): ?mine=false&status=pending\n\nRol Tabanlı Erişim:\n- Admin kullanıcılar: mine=false veya verilmediği durumda tüm randevuları görebilir\n- Uzman/Danışan kullanıcılar: Her zaman sadece kendi randevularını görür\n\nNot: Her iki parametre de isteğe bağlıdır.\n*/",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/v1/appointments/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"appointments",
						""
					],
					"query": [
						{
							"key": "mine",
							"value": "true",
							"description": "Filter by user's own appointments",
							"disabled": true
						},
						{
							"key": "mine",
							"value": "false",
							"description": "Show all appointments (admin only)",
							"disabled": true
						},
						{
							"key": "status",
							"value": "pending",
							"description": "Filter by status: pending",
							"disabled": true
						},
						{
							"key": "status",
							"value": "waiting_approval",
							"description": "Filter by status: waiting_approval",
							"disabled": true
						},
						{
							"key": "status",
							"value": "confirmed",
							"description": "Filter by status: confirmed",
							"disabled": true
						},
						{
							"key": "status",
							"value": "cancel_requested",
							"description": "Filter by status: cancel_requested",
							"disabled": true
						},
						{
							"key": "status",
							"value": "cancelled",
							"description": "Filter by status: cancelled",
							"disabled": true
						},
						{
							"key": "status",
							"value": "completed",
							"description": "Filter by status: completed",
							"disabled": true
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Zoom Toplantı Bilgileri",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{authorization-secret}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"url": {
					"raw": "{{base_url}}/api/v1/appointments/22/meeting-info/",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"appointments",
						"22",
						"meeting-info",
						""
					]
				}
			},
			"response": []
		},
		{
			"name": "Uzman Randevuları (Danışan İçin)",
			"request": {
				"auth": {
					"type": "bearer",
					"bearer": [
						{
							"key": "token",
							"value": "{{authorization-secret}}",
							"type": "string"
						}
					]
				},
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json",
						"type": "text"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "/*\nUzman Randevuları Endpoint'i - Danışanlar İçin\n\nBu endpoint danışan rolüne sahip kullanıcıların belirli bir uzmanın randevularını\nbelirtilen tarih aralığında görmesini sağlar.\n\nURL Yapısı: /api/v1/appointments/experts/{expert_id}/appointments/\n\nZorunlu Query Parametreleri:\n- start_date: Başlangıç tarihi (YYYY-MM-DD formatında)\n- end_date: Bitiş tarihi (YYYY-MM-DD formatında)\n\nDönen Veri:\n- expert_id: Uzman ID\n- start_date: Başlangıç tarihi\n- end_date: Bitiş tarihi\n- appointments: Randevu listesi (sadece id, date, time, status bilgileri)\n\nErişim Kısıtlaması:\n- Sadece 'client' rolüne sahip kullanıcılar erişebilir\n- Diğer roller (expert, admin) erişemez\n\nÖrnek Kullanım:\nGET /api/v1/appointments/experts/21/appointments/?start_date=2025-01-01&end_date=2025-01-30\n\nDönen Örnek Veri:\n{\n  \"expert_id\": 21,\n  \"start_date\": \"2025-01-01\",\n  \"end_date\": \"2025-01-30\",\n  \"appointments\": [\n    {\n      \"id\": 123,\n      \"date\": \"2025-01-15\",\n      \"time\": \"10:00:00\",\n      \"status\": \"confirmed\"\n    },\n    {\n      \"id\": 124,\n      \"date\": \"2025-01-20\",\n      \"time\": \"14:00:00\",\n      \"status\": \"pending\"\n    }\n  ]\n}\n\nHata Durumları:\n- 403 Forbidden: Kullanıcı client rolünde değil\n- 400 Bad Request: start_date veya end_date eksik ya da geçersiz format\n- 400 Bad Request: start_date > end_date\n*/",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/api/v1/appointments/experts/{{expert_id}}/appointments/?start_date=2025-10-01&end_date=2025-10-30",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"api",
						"v1",
						"appointments",
						"experts",
						"{{expert_id}}",
						"appointments",
						""
					],
					"query": [
						{
							"key": "start_date",
							"value": "2025-10-01",
							"description": "Başlangıç tarihi (YYYY-MM-DD)"
						},
						{
							"key": "end_date",
							"value": "2025-10-30",
							"description": "Bitiş tarihi (YYYY-MM-DD)"
						}
					]
				}
			},
			"response": []
		}
	]
}